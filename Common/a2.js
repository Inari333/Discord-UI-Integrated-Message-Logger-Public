const e="https://inari-discord-api-emhndjbwfqc4enfz.canadaeast-01.azurewebsites.net",t=Object.freeze({FREE:0,BASIC:1,PREMIUM:2});async function n(e,t){const n=await chrome.runtime.sendMessage({type:"PAY_FROM_DISCORD_MESSAGE_LOGGER",planLevel:e,key:w});n?.success?window.open(n.url,"_blank"):t&&t()}async function s(e,t){const n=await chrome.runtime.sendMessage({type:"KEY_CHECK_FROM_DISCORD_MESSAGE_LOGGER",key:e});return n?.success?n.level:(t&&t(),0)}const a=document.getElementById("logsCount"),d=document.getElementById("logsLimit"),i=document.getElementById("deleteButton"),o=document.getElementById("upgradeButton"),l=document.getElementById("backButton"),c=document.getElementById("discordLink"),r=document.getElementById("subPlanFree"),m=document.getElementById("subPlanBasic"),u=document.getElementById("subPlanPremium"),E=document.getElementById("planType"),L=document.getElementById("planLevel"),g=document.getElementById("key"),y=["Free","Basic","Premium"],h=("undefined"!=typeof browser?browser:chrome).storage.local,p=[Math.round(Math.pow(22.36,2)),Math.round(Math.pow(44.72,2)),-1*Math.round(Math.pow(1,3))];var w=null;function b(){h.get(["key"],e=>{e.key?w=e.key:(w=Array.from({length:10},()=>"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"[Math.floor(62*Math.random())]).join(""),h.set({key:w})),g&&(g.textContent=w),(L||d||o)&&s(w,()=>{o&&(o.classList.add("fullDisabled"),o.textContent="Online service unavailable")}).then(e=>{L&&(L.textContent=y[e]),d&&(d.textContent=-1==p[e]?" / Unlimited":" / "+p[e]),o&&(o.classList.contains("fullDisabled")||(o.classList.remove("disabled"),o.textContent="Upgrade",o.addEventListener("click",()=>{window.location.href="Plan.html?planLevel="+e})))})})}function I(){if(a&&h.get(["logsCount"],e=>{const t=e.logsCount||0;a.textContent=t,t>0?i.classList.remove("invisible"):i.classList.add("invisible")}),i&&i.addEventListener("click",()=>{chrome.runtime.sendMessage({type:"DELETE_ALL_LOGS_FROM_DISCORD_MESSAGE_LOGGER_POPUP"},e=>{e?.success&&(a.textContent="0")})}),l&&l.addEventListener("click",()=>{window.location.href="Index.html"}),c&&c.addEventListener("click",()=>{window.open("https://discord.gg/pUKDF2adMw","_blank")}),r&&r.addEventListener("click",()=>{r.classList.contains("disabled")||n(t.FREE)}),m&&m.addEventListener("click",()=>{m.classList.contains("disabled")||n(t.BASIC)}),u&&u.addEventListener("click",()=>{u.classList.contains("disabled")||n(t.PREMIUM)}),r||m||u){const e=new URLSearchParams(window.location.search),t=parseInt(e.get("planLevel"));if(!isNaN(t)){const e=[r,m,u];e[t]&&(e[t].classList.add("disabled"),e[t].textContent="Current plan",e[t]==u?m.classList.add("disabled"):e[t]==m&&u.classList.add("disabled"))}}if(E){const e=new URLSearchParams(window.location.search),t=parseInt(e.get("planLevel")),n=["Free","Basic","Premium"];E.textContent=n[t]}}b(),I();