chrome.runtime.onMessage.addListener((e,c,n)=>"GET_TOTAL_LOG_COUNT_FROM_DISCORD_MESSAGE_LOGGER_POPUP"===e.type?(chrome.tabs.query({active:!0,currentWindow:!0},([e])=>{e?.id?chrome.tabs.sendMessage(e.id,{type:"GET_TOTAL_LOG_COUNT"},e=>{chrome.runtime.lastError?n({success:!1}):n(e||{success:!1})}):n({count:null})}),!0):"DELETE_ALL_LOGS_FROM_DISCORD_MESSAGE_LOGGER_POPUP"===e.type?(chrome.tabs.query({active:!0,currentWindow:!0},([e])=>{e?.id?chrome.tabs.sendMessage(e.id,{type:"DELETE_ALL_LOGS"},e=>{chrome.runtime.lastError?n({success:!1}):n(e||{success:!1})}):n({success:!1})}),!0):"KEY_CHECK_FROM_DISCORD_MESSAGE_LOGGER"===e.type||"KEY_CHECK_FROM_DISCORD_MESSAGE_LOGGER_POPUP"===e.type?(t(e.key).then(e=>{n(e)}),!0):"PAY_FROM_DISCORD_MESSAGE_LOGGER"===e.type?(s(e.planLevel,e.key).then(e=>{n(e)}),!0):void 0);const e="https://inari-discord-api-emhndjbwfqc4enfz.canadaeast-01.azurewebsites.net";async function s(s,t){try{const c=await fetch(`${e}/pay`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({planLevel:s,key:t})});return{success:!0,url:(await c.json()).url}}catch(e){return{success:!1,url:""}}}async function t(s){try{const t=await fetch(`${e}/KeyCheck`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Key:s})});if(!t.ok)return{success:!1,level:0};return{success:!0,level:(await t.json()).level}}catch(e){return{success:!1,level:0}}}